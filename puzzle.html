<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Puzzle</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        body {
            font-family: 微軟正黑體;
            background-color: rgba(255, 241, 244, 0.774);
            /* background: url(./dumplings.jpg) */
        }

        .container {
            width: 600px;            
        }        

        #bigImage {
            display: table;
        }

        .row {
            display: table-row;
        }

        .puzzle1 , .puzzle2 , .puzzle3 , .puzzle4 , .puzzle5 , 
        .puzzle6 , .puzzle7 , .puzzle8 , .puzzle9{
            display: table-cell;
            /* display: none; */
            width: 200px;
            height: 200px;
            background: url(./dumplings.jpg);
            border: 2px solid white;            
            cursor:pointer;   /*鼠標*/
        }
        .puzzle1{
            background: white;
            cursor: default;
        }
        .puzzle2{
            background-position: center top;
        }
        .puzzle3{
            background-position: right top;
        }
        .puzzle4{
            background-position: left center;
        }
        .puzzle5{
            background-position: center center;
        }
        .puzzle6{
            background-position: right center;
        }
        .puzzle7{
            background-position: left bottom;
        }
        .puzzle8{
            background-position: center bottom;
        }
        .puzzle9{
            background-position: right bottom;
        }

        #smallPic{
            background: url(./dumplingss.jpg);
            width: 188px;
            height: 188px;
        }
    </style>
</head>

<body>

    <div align="center" class="container container1 mt-3 mb-3">
        <h2>Puzzle</h2>
    </div>

    <div id="bigImage" class="container container1">
        <div id="row1" class="row">
            <div class="puzzle1" id="puzzle11" onclick="clickPuzzle(1,1)"></div>
            <div class="puzzle2" id="puzzle12" onclick="clickPuzzle(1,2)"></div>
            <div class="puzzle3" id="puzzle13" onclick="clickPuzzle(1,3)"></div>
        </div>
        <div id="row2" class="row">
            <div class="puzzle4" id="puzzle21" onclick="clickPuzzle(2,1)"></div>
            <div class="puzzle5" id="puzzle22" onclick="clickPuzzle(2,2)"></div>
            <div class="puzzle6" id="puzzle23" onclick="clickPuzzle(2,3)"></div>
        </div>
        <div id="row3" class="row">
            <div class="puzzle7" id="puzzle31" onclick="clickPuzzle(3,1)"></div>
            <div class="puzzle8" id="puzzle32" onclick="clickPuzzle(3,2)"></div>
            <div class="puzzle9" id="puzzle33" onclick="clickPuzzle(3,3)"></div>
        </div>
    </div>

    <div align="center" class="container container1 mt-3">
        <button id="fresh" type="button" class="btn btn-outline-dark mb-1">Fresh !</button>
        <div id="smallPic"></div>
    </div>

    <!-- <button id="xxx" type="button" class="btn btn-outline-dark mb-1">3*3 !</button>
    <button id="ooo" type="button" class="btn btn-outline-dark mb-1">3*3 Open !</button> -->

    <script src="jquery-3.3.1.min.js"></script>
    <script>
        // $("#xxx").on('click',close3);
        // function close3(){
        //     $(".container1").css("display","none");
        // }
        // $("#ooo").on('click',open3);
        // function open3(){
        //     $(".container1").css("display","table");
        // }

        $("#fresh").on('click',fresh);
        //弄亂puzzles
        function fresh(){
            for(var row = 1; row <= 3; row++){
                for(var column = 1 ; column <= 3; column++){
                    var row2 = Math.floor(Math.random() * 3 + 1);
                    var column2 = Math.floor(Math.random() * 3 + 1);
                    change("puzzle" + row + column , "puzzle" + row2 + column2);
                }
            }
        }           
        
        //點擊圖片puzzle(x,x)
        function clickPuzzle(row,column){
            var puzzleId = document.getElementById("puzzle" + row + column);
            var puzzleClass = puzzleId.className;
                
            //puzzle1是空白的css
            if(puzzleClass != "puzzle1"){
                if(column < 3){
                    if(document.getElementById("puzzle" + row + (column + 1)).className == "puzzle1"){
                        change("puzzle" + row + column , "puzzle" + row +(column + 1));
                        console.log("右");
                    }
                }
                if(column > 1){
                    if(document.getElementById("puzzle" + row + (column - 1)).className == "puzzle1"){
                       change("puzzle" + row + column , "puzzle" + row +(column - 1));
                       console.log("左")
                    }
                }
                if(row < 3){
                    if(document.getElementById("puzzle" + (row + 1) + column).className == "puzzle1"){
                        change("puzzle" + row + column , "puzzle" + (row + 1) + column);
                        console.log("下")
                    }
                }
                if(row > 1){
                    if(document.getElementById("puzzle" + (row - 1) + column).className == "puzzle1"){
                        change("puzzle" + row + column , "puzzle" + (row - 1) + column);
                        console.log("上")
                    }
                }             
            }win();
        }  

        //交換兩張圖片位置
        function change(a,b){       //直接寫idName,idName
            var storage = $('#' + a).attr('class');
            $('#' + a).attr('class' , $('#' + b).attr('class'));  //逗號後面是寫更換的className  ex.$('#div1').attr('class','E H');
            $('#' + b).attr('class' , storage);
        }

        function win(){
            setTimeout(() => {                
                if(document.getElementById("puzzle11").className == "puzzle1" &&
                document.getElementById("puzzle12").className == "puzzle2" &&
                document.getElementById("puzzle13").className == "puzzle3" &&
                document.getElementById("puzzle21").className == "puzzle4" &&
                document.getElementById("puzzle22").className == "puzzle5" &&
                document.getElementById("puzzle23").className == "puzzle6" &&
                document.getElementById("puzzle31").className == "puzzle7" &&
                document.getElementById("puzzle32").className == "puzzle8" &&
                document.getElementById("puzzle33").className == "puzzle9"
                ){
                   alert("FINSISH !");
                }
            }, 1000);
        }
    </script>
</body>

</html>